<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Learning Aid: Text-to-Speech</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563eb',
                        secondary: '#475569',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                    }
                }
            }
        };
    </script>
</head>
<body class="bg-gray-50 font-inter">
    <!-- @COMPONENT: Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-volume-up text-primary text-2xl"></i>
                    <h1 class="text-xl font-semibold text-gray-900">Text-to-Speech Learning Aid</h1>
                </div>
                <div class="flex items-center space-x-2">
                    <!-- PWA Install Button -->
                    <button id="pwa-install-btn" class="hidden bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors" data-implementation="Show when PWA installable">
                        <i class="fas fa-download mr-2"></i>Install App
                    </button>
                    <div class="flex items-center text-sm text-gray-600">
                        <div class="w-2 h-2 bg-green-500 rounded-full mr-2" data-bind="connectionStatus"></div>
                        <span data-mock="true">Online</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <!-- @COMPONENT: Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Text Input Section -->
            <!-- @COMPONENT: TextInputSection -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-sm border p-6 mb-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">Add Text Content</h2>
                    
                    <!-- File Upload -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Upload Text File</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer" data-implementation="File drop zone with drag and drop support">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                            <p class="text-gray-600 mb-2">Drop your .txt file here or click to browse</p>
                            <input type="file" accept=".txt" class="hidden" id="file-upload" data-event="change:handleFileUpload">
                            <button type="button" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors" onclick="document.getElementById('file-upload').click()">
                                Choose File
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Supported formats: .txt files only</p>
                    </div>

                    <!-- Text Area -->
                    <div class="mb-6">
                        <label for="text-content" class="block text-sm font-medium text-gray-700 mb-2">Or Paste Text Here</label>
                        <textarea 
                            id="text-content" 
                            class="w-full h-40 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-y" 
                            placeholder="Paste your text here or upload a file above..."
                            data-bind="currentText"
                            data-mock="true"
                        >Machine learning is a subset of artificial intelligence (AI) that provides systems the ability to automatically learn and improve from experience without being explicitly programmed. Machine learning focuses on the development of computer programs that can access data and use it to learn for themselves.</textarea>
                        <div class="flex justify-between items-center mt-2">
                            <p class="text-xs text-gray-500"><span data-bind="characterCount" data-mock="true">245</span> characters</p>
                            <button type="button" class="text-sm text-primary hover:text-blue-700" data-event="click:clearText">
                                <i class="fas fa-trash mr-1"></i>Clear
                            </button>
                        </div>
                    </div>

                    <!-- Document Title -->
                    <div class="mb-6">
                        <label for="document-title" class="block text-sm font-medium text-gray-700 mb-2">Document Title (Optional)</label>
                        <input 
                            type="text" 
                            id="document-title" 
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" 
                            placeholder="Enter a title for this document..."
                            data-bind="documentTitle"
                            data-mock="true"
                            value="Introduction to Machine Learning"
                        >
                    </div>

                    <!-- Save Button -->
                    <button type="button" class="w-full bg-success text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors" data-event="click:saveDocument">
                        <i class="fas fa-save mr-2"></i>Save Document
                    </button>
                </div>

                <!-- Text-to-Speech Controls -->
                <!-- @COMPONENT: SpeechControls -->
                <div class="bg-white rounded-xl shadow-sm border p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">Text-to-Speech Controls</h2>
                    
                    <!-- Playback Controls -->
                    <div class="flex items-center justify-center space-x-4 mb-6">
                        <button class="bg-primary text-white p-4 rounded-full hover:bg-blue-700 transition-colors shadow-lg" data-event="click:playPause" data-implementation="Toggle play/pause based on speech state">
                            <i class="fas fa-play text-xl" data-bind="playPauseIcon"></i>
                        </button>
                        <button class="bg-gray-500 text-white p-3 rounded-full hover:bg-gray-600 transition-colors" data-event="click:stopSpeech">
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>

                    <!-- Progress Bar -->
                    <div class="mb-6">
                        <div class="flex justify-between text-sm text-gray-600 mb-2">
                            <span>Progress</span>
                            <span><span data-bind="currentWord" data-mock="true">12</span> / <span data-bind="totalWords" data-mock="true">45</span> words</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 27%" data-bind="progressPercentage"></div>
                        </div>
                    </div>

                    <!-- Voice Settings -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Speech Rate</label>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-tachometer-alt text-gray-400"></i>
                                <input type="range" min="0.5" max="2" step="0.1" value="1" class="flex-1" data-bind="speechRate" data-event="change:updateSpeechRate">
                                <span class="text-sm text-gray-600 w-8" data-bind="rateDisplay" data-mock="true">1.0x</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Voice</label>
                            <select class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" data-bind="selectedVoice" data-event="change:updateVoice">
                                <option value="default" data-mock="true">Default Voice</option>
                                <option value="female" data-mock="true">Female Voice</option>
                                <option value="male" data-mock="true">Male Voice</option>
                            </select>
                        </div>
                    </div>

                    <!-- Current Reading Display -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="text-sm font-medium text-gray-700 mb-2">Currently Reading:</h3>
                        <p class="text-sm text-gray-600 italic" data-bind="currentSentence" data-mock="true">
                            "Machine learning is a subset of artificial intelligence (AI) that provides systems the ability to automatically learn..."
                        </p>
                    </div>
                </div>
                <!-- @END_COMPONENT: SpeechControls -->
            </div>
            <!-- @END_COMPONENT: TextInputSection -->

            <!-- Saved Documents Sidebar -->
            <!-- @COMPONENT: DocumentsList -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-sm border p-6 sticky top-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold text-gray-900">Saved Documents</h2>
                        <button class="text-primary hover:text-blue-700" data-event="click:refreshDocuments">
                            <i class="fas fa-refresh"></i>
                        </button>
                    </div>

                    <!-- Search Documents -->
                    <div class="mb-4">
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input 
                                type="text" 
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-sm" 
                                placeholder="Search documents..."
                                data-bind="searchQuery"
                                data-event="input:filterDocuments"
                            >
                        </div>
                    </div>

                    <!-- Document List -->
                    <!-- @STATE: documents:array = [] -->
                    <!-- @STATE: isLoading:boolean = false -->
                    <div class="space-y-3 max-h-96 overflow-y-auto">
                        <!-- Loading State -->
                        <div class="hidden" data-bind="isLoading">
                            <div class="flex items-center justify-center py-8">
                                <i class="fas fa-spinner fa-spin text-primary text-xl"></i>
                            </div>
                        </div>

                        <!-- @MAP: documents.map(doc => ( -->
                        <!-- Document Item -->
                        <div class="border border-gray-200 rounded-lg p-3 hover:bg-gray-50 cursor-pointer transition-colors" data-event="click:loadDocument" data-mock="true">
                            <div class="flex items-start justify-between">
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-medium text-gray-900 truncate" data-bind="doc.title">Introduction to Machine Learning</h3>
                                    <p class="text-xs text-gray-500 mt-1" data-bind="doc.created_at">2 hours ago</p>
                                    <p class="text-sm text-gray-600 mt-1 line-clamp-2" data-bind="doc.content.substring(0, 60)">Machine learning is a subset of artificial intelligence...</p>
                                </div>
                                <div class="flex flex-col space-y-1 ml-2">
                                    <button class="text-primary hover:text-blue-700 text-xs" data-event="click:editDocument">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-500 hover:text-red-700 text-xs" data-event="click:deleteDocument">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Mock Document 2 -->
                        <div class="border border-gray-200 rounded-lg p-3 hover:bg-gray-50 cursor-pointer transition-colors" data-event="click:loadDocument" data-mock="true">
                            <div class="flex items-start justify-between">
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-medium text-gray-900 truncate" data-bind="doc.title">History of Computing</h3>
                                    <p class="text-xs text-gray-500 mt-1" data-bind="doc.created_at">1 day ago</p>
                                    <p class="text-sm text-gray-600 mt-1 line-clamp-2" data-bind="doc.content.substring(0, 60)">The history of computing is longer than the history of computing hardware...</p>
                                </div>
                                <div class="flex flex-col space-y-1 ml-2">
                                    <button class="text-primary hover:text-blue-700 text-xs" data-event="click:editDocument">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-500 hover:text-red-700 text-xs" data-event="click:deleteDocument">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Mock Document 3 -->
                        <div class="border border-gray-200 rounded-lg p-3 hover:bg-gray-50 cursor-pointer transition-colors" data-event="click:loadDocument" data-mock="true">
                            <div class="flex items-start justify-between">
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-medium text-gray-900 truncate" data-bind="doc.title">Physics Chapter 5: Waves</h3>
                                    <p class="text-xs text-gray-500 mt-1" data-bind="doc.created_at">3 days ago</p>
                                    <p class="text-sm text-gray-600 mt-1 line-clamp-2" data-bind="doc.content.substring(0, 60)">A wave is a disturbance that transfers energy from place to place...</p>
                                </div>
                                <div class="flex flex-col space-y-1 ml-2">
                                    <button class="text-primary hover:text-blue-700 text-xs" data-event="click:editDocument">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-500 hover:text-red-700 text-xs" data-event="click:deleteDocument">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->

                        <!-- Empty State -->
                        <div class="hidden text-center py-8" data-bind="documents.length === 0">
                            <i class="fas fa-file-alt text-4xl text-gray-300 mb-3"></i>
                            <p class="text-gray-500 text-sm">No documents saved yet</p>
                            <p class="text-gray-400 text-xs mt-1">Upload or paste text above to get started</p>
                        </div>
                    </div>

                    <!-- Storage Info -->
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span>Storage: <span data-bind="usedStorage" data-mock="true">2.1 MB</span> used</span>
                            <button class="text-primary hover:text-blue-700" data-event="click:clearAllDocuments">Clear All</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: DocumentsList -->
        </div>

        <!-- Help Section -->
        <!-- @COMPONENT: HelpSection -->
        <div class="mt-8 bg-blue-50 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">
                <i class="fas fa-question-circle text-primary mr-2"></i>
                How to Use
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
                <div class="flex items-start space-x-3">
                    <div class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-medium">1</div>
                    <div>
                        <h4 class="font-medium text-gray-900">Add Content</h4>
                        <p class="text-gray-600 mt-1">Upload a .txt file or paste text directly into the textarea above.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-3">
                    <div class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-medium">2</div>
                    <div>
                        <h4 class="font-medium text-gray-900">Listen & Learn</h4>
                        <p class="text-gray-600 mt-1">Use the play controls to hear your text. Adjust speed and voice to your preference.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-3">
                    <div class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-medium">3</div>
                    <div>
                        <h4 class="font-medium text-gray-900">Save & Organize</h4>
                        <p class="text-gray-600 mt-1">Save documents to access them later. All data is stored locally on your device.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: HelpSection -->
    </main>
    <!-- @END_COMPONENT: Main Content -->

    <!-- Loading Overlay -->
    <!-- @COMPONENT: LoadingOverlay -->
    <div class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" data-bind="isGlobalLoading">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <i class="fas fa-spinner fa-spin text-primary text-xl"></i>
            <span class="text-gray-700">Processing...</span>
        </div>
    </div>
    <!-- @END_COMPONENT: LoadingOverlay -->

    <!-- Toast Notifications -->
    <!-- @COMPONENT: ToastNotifications -->
    <div class="fixed top-4 right-4 z-50 space-y-2" id="toast-container">
        <!-- Success Toast Example (hidden by default) -->
        <div class="hidden bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3 animate-fade-in" data-toast-type="success">
            <i class="fas fa-check-circle"></i>
            <span data-toast-message>Document saved successfully!</span>
            <button class="text-white hover:text-green-200" data-event="click:dismissToast">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Error Toast Example (hidden by default) -->
        <div class="hidden bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3 animate-fade-in" data-toast-type="error">
            <i class="fas fa-exclamation-circle"></i>
            <span data-toast-message>Error uploading file. Please try again.</span>
            <button class="text-white hover:text-red-200" data-event="click:dismissToast">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <!-- @END_COMPONENT: ToastNotifications -->

    <!-- PWA Install Prompt (hidden by default) -->
    <!-- @COMPONENT: PWAInstallPrompt -->
    <div class="hidden fixed bottom-4 left-4 right-4 md:left-auto md:w-80 bg-white rounded-lg shadow-xl border p-4 z-50" id="pwa-prompt" data-bind="showInstallPrompt">
        <div class="flex items-start space-x-3">
            <i class="fas fa-mobile-alt text-primary text-xl"></i>
            <div class="flex-1">
                <h3 class="font-semibold text-gray-900">Install App</h3>
                <p class="text-sm text-gray-600 mt-1">Add this app to your home screen for quick access and offline use.</p>
            </div>
        </div>
        <div class="flex justify-end space-x-2 mt-4">
            <button class="text-gray-500 hover:text-gray-700 text-sm" data-event="click:dismissInstallPrompt">Not now</button>
            <button class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700" data-event="click:installPWA">Install</button>
        </div>
    </div>
    <!-- @END_COMPONENT: PWAInstallPrompt -->

    <script>
        // TODO: Implement React components, state management, and API integration
        // TODO: Add Web Speech API integration
        // TODO: Implement file upload handling
        // TODO: Add PWA service worker registration
        // TODO: Implement document CRUD operations
        // TODO: Add speech synthesis controls and progress tracking
        
        (function() {
            // Mock interactions for demonstration
            console.log('Text-to-Speech Learning Aid - Design Mockup');
            console.log('Features to implement:');
            console.log('- File upload and text processing');
            console.log('- Web Speech API integration');
            console.log('- Document management with SQLite backend');
            console.log('- PWA installation and offline support');
            console.log('- Responsive design for mobile learning');
            
            // Simple demo for play/pause icon toggle
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-event*="playPause"]')) {
                    const icon = e.target.closest('button').querySelector('i');
                    if (icon.classList.contains('fa-play')) {
                        icon.classList.remove('fa-play');
                        icon.classList.add('fa-pause');
                    } else {
                        icon.classList.remove('fa-pause');
                        icon.classList.add('fa-play');
                    }
                }
            });
        })();
    </script>
</body>
</html>